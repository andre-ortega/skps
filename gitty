#!/bin/bash
# Dependencies
#   tree
#   inotifytools
#   bat

notify="inotifywait @./node_modules -r -e close_write -e access -e delete . &> /dev/null"
cmd="git status -s"
cmd2="git --no-pager diff HEAD | bat --paging=never --theme ansi"

function run {
	clear
  eval "$cmd"
  eval "$cmd2"
}

run

while eval "$notify"; do
    run
done
